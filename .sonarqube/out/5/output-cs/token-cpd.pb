µ
UC:\Users\omerf\Desktop\ReCapProject\ReCapProject\WebAPI\Controllers\AuthController.cs
	namespace 	
WebAPI
 
. 
Controllers 
{ 
[ 
Route 

(
 
$str 
) 
] 
[		 
ApiController		 
]		 
public

 

class

 
AuthController

 
:

  !

Controller

" ,
{ 
private 
IAuthService 
_authService )
;) *
public 
AuthController 
( 
IAuthService *
authService+ 6
)6 7
{ 	
_authService 
= 
authService &
;& '
} 	
[ 	
HttpPost	 
( 
$str 
) 
] 
public 
ActionResult 
Login !
(! "
UserForLoginDto" 1
userForLoginDto2 A
)A B
{ 	
var 
userToLogin 
= 
_authService *
.* +
Login+ 0
(0 1
userForLoginDto1 @
)@ A
;A B
if 
( 
! 
userToLogin 
. 
Success $
)$ %
{ 
return 

BadRequest !
(! "
userToLogin" -
)- .
;. /
} 
var 
result 
= 
_authService %
.% &
CreateAccessToken& 7
(7 8
userToLogin8 C
.C D
DataD H
)H I
;I J
if 
( 
result 
. 
Success 
) 
{ 
return 
Ok 
( 
result  
)  !
;! "
}   
return"" 

BadRequest"" 
("" 
result"" $
)""$ %
;""% &
}## 	
[%% 	
HttpPost%%	 
(%% 
$str%% 
)%% 
]%% 
public&& 
ActionResult&& 
Register&& $
(&&$ %
UserForRegisterDto&&% 7
userForRegisterDto&&8 J
)&&J K
{'' 	
var(( 

userExists(( 
=(( 
_authService(( )
.(() *

UserExists((* 4
(((4 5
userForRegisterDto((5 G
.((G H
Email((H M
)((M N
;((N O
if)) 
()) 
!)) 

userExists)) 
.)) 
Success)) #
)))# $
{** 
return++ 

BadRequest++ !
(++! "

userExists++" ,
)++, -
;++- .
},, 
var.. 
registerResult.. 
=..  
_authService..! -
...- .
Register... 6
(..6 7
userForRegisterDto..7 I
,..I J
userForRegisterDto..K ]
...] ^
Password..^ f
)..f g
;..g h
var// 
result// 
=// 
_authService// %
.//% &
CreateAccessToken//& 7
(//7 8
registerResult//8 F
.//F G
Data//G K
)//K L
;//L M
if00 
(00 
result00 
.00 
Success00 
)00 
{11 
return22 
Ok22 
(22 
result22  
)22  !
;22! "
}33 
return55 

BadRequest55 
(55 
result55 $
)55$ %
;55% &
}66 	
}77 
}88 ‡$
WC:\Users\omerf\Desktop\ReCapProject\ReCapProject\WebAPI\Controllers\BrandsController.cs
	namespace 	
WebAPI
 
. 
Controllers 
{ 
[ 
Route 

(
 
$str 
) 
] 
[		 
ApiController		 
]		 
public

 

class

 
BrandsController

 !
:

" #
ControllerBase

$ 2
{ 
private 
readonly 
IBrandService &
_brandService' 4
;4 5
public 
BrandsController 
(  
IBrandService  -
brandService. :
): ;
{ 	
_brandService 
= 
brandService (
;( )
} 	
[ 	
HttpGet	 
( 
$str 
) 
] 
public 
IActionResult 
GetAll #
(# $
)$ %
{ 	
var 
result 
= 
_brandService &
.& '
GetAll' -
(- .
). /
;/ 0
if 
( 
result 
. 
Success 
) 
{ 
return 
Ok 
( 
result  
)  !
;! "
} 
return 

BadRequest 
( 
result $
)$ %
;% &
} 	
[ 	
HttpGet	 
( 
$str 
) 
] 
public 
IActionResult 
GetById $
($ %
int% (
id) +
)+ ,
{   	
var!! 
result!! 
=!! 
_brandService!! &
.!!& '
GetById!!' .
(!!. /
id!!/ 1
)!!1 2
;!!2 3
if"" 
("" 
result"" 
."" 
Success"" 
)"" 
{## 
return$$ 
Ok$$ 
($$ 
result$$  
)$$  !
;$$! "
}%% 
return&& 

BadRequest&& 
(&& 
result&& $
)&&$ %
;&&% &
}'' 	
[)) 	
HttpPost))	 
()) 
$str)) 
))) 
])) 
public** 
IActionResult** 
Add**  
(**  !
Brand**! &
brand**' ,
)**, -
{++ 	
var,, 
result,, 
=,, 
_brandService,, &
.,,& '
Add,,' *
(,,* +
brand,,+ 0
),,0 1
;,,1 2
if-- 
(-- 
result-- 
.-- 
Success-- 
)-- 
{.. 
return// 
Ok// 
(// 
result//  
)//  !
;//! "
}00 
return11 

BadRequest11 
(11 
result11 $
)11$ %
;11% &
}22 	
[44 	
HttpPost44	 
(44 
$str44 
)44 
]44 
public55 
IActionResult55 
Update55 #
(55# $
Brand55$ )
brand55* /
)55/ 0
{66 	
var77 
result77 
=77 
_brandService77 &
.77& '
Update77' -
(77- .
brand77. 3
)773 4
;774 5
if88 
(88 
result88 
.88 
Success88 
)88 
{99 
return:: 
Ok:: 
(:: 
result::  
)::  !
;::! "
};; 
return<< 

BadRequest<< 
(<< 
result<< $
)<<$ %
;<<% &
}== 	
[?? 	
HttpPost??	 
(?? 
$str?? 
)?? 
]?? 
public@@ 
IActionResult@@ 
Delete@@ #
(@@# $
Brand@@$ )
brand@@* /
)@@/ 0
{AA 	
varBB 
resultBB 
=BB 
_brandServiceBB &
.BB& '
RemoveBB' -
(BB- .
brandBB. 3
)BB3 4
;BB4 5
ifCC 
(CC 
resultCC 
.CC 
SuccessCC 
)CC 
{DD 
returnEE 
OkEE 
(EE 
resultEE  
)EE  !
;EE! "
}FF 
returnGG 

BadRequestGG 
(GG 
resultGG $
)GG$ %
;GG% &
}HH 	
}II 
}JJ Ÿ0
ZC:\Users\omerf\Desktop\ReCapProject\ReCapProject\WebAPI\Controllers\CarImagesController.cs
	namespace 	
WebAPI
 
. 
Controllers 
{ 
[ 
Route 

(
 
$str 
) 
] 
[		 
ApiController		 
]		 
public

 

class

 
CarImagesController

 $
:

% &
ControllerBase

' 5
{ 
private 
readonly 
ICarImageService )
_carImageService* :
;: ;
public 
CarImagesController "
(" #
ICarImageService# 3
carImageService4 C
)C D
{ 	
_carImageService 
= 
carImageService .
;. /
} 	
[ 	
HttpPost	 
( 
$str 
) 
] 
public 
IActionResult 
Add  
(  !
[! "
FromForm" *
]* +
	IFormFile, 5
file6 :
,: ;
[< =
FromForm= E
]E F
CarImageG O
carImageP X
)X Y
{ 	
var 
result 
= 
_carImageService )
.) *
Add* -
(- .
file. 2
,2 3
carImage4 <
)< =
;= >
if 
( 
result 
. 
Success 
) 
{ 
return 
Ok 
( 
result  
)  !
;! "
} 
return 

BadRequest 
( 
result $
)$ %
;% &
} 	
[ 	
HttpPost	 
( 
$str 
) 
] 
public 
IActionResult 
Update #
(# $
[$ %
FromForm% -
]- .
	IFormFile/ 8
file9 =
,= >
[? @
FromForm@ H
]H I
CarImageJ R
carImageS [
)[ \
{   	
var!! 
result!! 
=!! 
_carImageService!! )
.!!) *
Update!!* 0
(!!0 1
file!!1 5
,!!5 6
carImage!!7 ?
)!!? @
;!!@ A
if"" 
("" 
result"" 
."" 
Success"" 
)"" 
{## 
return$$ 
Ok$$ 
($$ 
result$$  
)$$  !
;$$! "
}%% 
return&& 

BadRequest&& 
(&& 
result&& $
)&&$ %
;&&% &
}'' 	
[)) 	
HttpPost))	 
()) 
$str)) 
))) 
])) 
public** 
IActionResult** 
Delete** #
(**# $
CarImage**$ ,
carImage**- 5
)**5 6
{++ 	
var,, 
carDeleteImage,, 
=,,  
_carImageService,,! 1
.,,1 2
GetById,,2 9
(,,9 :
carImage,,: B
.,,B C
Id,,C E
),,E F
.,,F G
Data,,G K
;,,K L
var-- 
result-- 
=-- 
_carImageService-- )
.--) *
Delete--* 0
(--0 1
carDeleteImage--1 ?
)--? @
;--@ A
if.. 
(.. 
result.. 
... 
Success.. 
).. 
{// 
return00 
Ok00 
(00 
result00  
)00  !
;00! "
}11 
return22 

BadRequest22 
(22 
result22 $
)22$ %
;22% &
}33 	
[55 	
HttpGet55	 
(55 
$str55 
)55 
]55 
public66 
IActionResult66 
GetAll66 #
(66# $
)66$ %
{77 	
var88 
result88 
=88 
_carImageService88 )
.88) *
GetAll88* 0
(880 1
)881 2
;882 3
if99 
(99 
result99 
.99 
Success99 
)99 
{:: 
return;; 
Ok;; 
(;; 
result;;  
);;  !
;;;! "
}<< 
return== 

BadRequest== 
(== 
result== $
)==$ %
;==% &
}>> 	
[@@ 	
HttpGet@@	 
(@@ 
$str@@ 
)@@ 
]@@ 
publicAA 
IActionResultAA 
GetByIdAA $
(AA$ %
intAA% (
idAA) +
)AA+ ,
{BB 	
varCC 
resultCC 
=CC 
_carImageServiceCC )
.CC) *
GetByIdCC* 1
(CC1 2
idCC2 4
)CC4 5
;CC5 6
ifDD 
(DD 
resultDD 
.DD 
SuccessDD 
)DD 
{EE 
returnFF 
OkFF 
(FF 
resultFF  
)FF  !
;FF! "
}GG 
returnHH 

BadRequestHH 
(HH 
resultHH $
)HH$ %
;HH% &
}II 	
[KK 	
HttpGetKK	 
(KK 
$strKK &
)KK& '
]KK' (
publicLL 
IActionResultLL 
GetCarImagesByCarIdLL 0
(LL0 1
intLL1 4
carIdLL5 :
)LL: ;
{MM 	
varNN 
resultNN 
=NN 
_carImageServiceNN )
.NN) *
GetCarImagesByCarIdNN* =
(NN= >
carIdNN> C
)NNC D
;NND E
ifOO 
(OO 
resultOO 
.OO 
SuccessOO 
)OO 
{PP 
returnQQ 
OkQQ 
(QQ 
resultQQ  
)QQ  !
;QQ! "
}RR 
returnSS 

BadRequestSS 
(SS 
resultSS $
)SS$ %
;SS% &
}TT 	
}UU 
}VV ñD
UC:\Users\omerf\Desktop\ReCapProject\ReCapProject\WebAPI\Controllers\CarsController.cs
	namespace		 	
WebAPI		
 
.		 
Controllers		 
{

 
[ 
Route 

(
 
$str 
) 
] 
[ 
ApiController 
] 
public 

class 
CarsController 
:  !
ControllerBase" 0
{ 
private 
readonly 
ICarService $
_carService% 0
;0 1
public 
CarsController 
( 
ICarService )

carService* 4
)4 5
{ 	
_carService 
= 

carService $
;$ %
} 	
[ 	
HttpGet	 
( 
$str 
) 
] 
public 
IActionResult 
GetAll #
(# $
)$ %
{ 	
var 
result 
= 
_carService $
.$ %
GetAll% +
(+ ,
), -
;- .
if 
( 
result 
. 
Success 
) 
{ 
return 
Ok 
( 
result  
)  !
;! "
} 
return 

BadRequest 
( 
result $
)$ %
;% &
} 	
[!! 	
HttpGet!!	 
(!! 
$str!!  
)!!  !
]!!! "
public"" 
IActionResult"" 
GetCarDetails"" *
(""* +
)""+ ,
{## 	
var$$ 
result$$ 
=$$ 
_carService$$ $
.$$$ %
GetCarDetails$$% 2
($$2 3
)$$3 4
;$$4 5
if%% 
(%% 
result%% 
.%% 
Success%% 
)%% 
{&& 
return'' 
Ok'' 
('' 
result''  
)''  !
;''! "
}(( 
return)) 

BadRequest)) 
()) 
result)) $
)))$ %
;))% &
}** 	
[,, 	
HttpGet,,	 
(,, 
$str,, #
),,# $
],,$ %
public-- 
IActionResult-- 
GetCarsByBrandId-- -
(--- .
int--. 1
brandId--2 9
)--9 :
{.. 	
var// 
result// 
=// 
_carService// $
.//$ %
GetCarsByBrandId//% 5
(//5 6
brandId//6 =
)//= >
;//> ?
if00 
(00 
result00 
.00 
Success00 
)00 
{11 
return22 
Ok22 
(22 
result22  
)22  !
;22! "
}33 
return44 

BadRequest44 
(44 
result44 $
)44$ %
;44% &
}55 	
[77 	
HttpGet77	 
(77 
$str77 #
)77# $
]77$ %
public88 
IActionResult88 
GetCarsByColorId88 -
(88- .
int88. 1
colorId882 9
)889 :
{99 	
var:: 
result:: 
=:: 
_carService:: $
.::$ %
GetCarsByColorId::% 5
(::5 6
colorId::6 =
)::= >
;::> ?
if;; 
(;; 
result;; 
.;; 
Success;; 
);; 
{<< 
return== 
Ok== 
(== 
result==  
)==  !
;==! "
}>> 
return?? 

BadRequest?? 
(?? 
result?? $
)??$ %
;??% &
}@@ 	
[BB 	
HttpGetBB	 
(BB 
$strBB &
)BB& '
]BB' (
publicCC 
IActionResultCC 
GetCarsByDailyPriceCC 0
(CC0 1
intCC1 4
minCC5 8
,CC8 9
intCC: =
maxCC> A
)CCA B
{DD 	
varEE 
resultEE 
=EE 
_carServiceEE $
.EE$ %
GetCarsByDailyPriceEE% 8
(EE8 9
minEE9 <
,EE< =
maxEE> A
)EEA B
;EEB C
ifFF 
(FF 
resultFF 
.FF 
SuccessFF 
)FF 
{GG 
returnHH 
OkHH 
(HH 
resultHH  
)HH  !
;HH! "
}II 
returnJJ 

BadRequestJJ 
(JJ 
resultJJ $
)JJ$ %
;JJ% &
}KK 	
[MM 	
HttpGetMM	 
(MM 
$strMM %
)MM% &
]MM& '
publicNN 
IActionResultNN 
GetCarsByModelYearNN /
(NN/ 0
intNN0 3
	modelYearNN4 =
)NN= >
{OO 	
varPP 
resultPP 
=PP 
_carServicePP $
.PP$ %
GetCarsByModelYearPP% 7
(PP7 8
	modelYearPP8 A
)PPA B
;PPB C
ifQQ 
(QQ 
resultQQ 
.QQ 
SuccessQQ 
)QQ 
{RR 
returnSS 
OkSS 
(SS 
resultSS  
)SS  !
;SS! "
}TT 
returnUU 

BadRequestUU 
(UU 
resultUU $
)UU$ %
;UU% &
}VV 	
[XX 	
HttpGetXX	 
(XX 
$strXX 
)XX 
]XX 
publicYY 
IActionResultYY 
GetByIdYY $
(YY$ %
intYY% (
carIdYY) .
)YY. /
{ZZ 	
var[[ 
result[[ 
=[[ 
_carService[[ $
.[[$ %
GetById[[% ,
([[, -
carId[[- 2
)[[2 3
;[[3 4
if\\ 
(\\ 
result\\ 
.\\ 
Success\\ 
)\\ 
{]] 
return^^ 
Ok^^ 
(^^ 
result^^  
)^^  !
;^^! "
}__ 
return`` 

BadRequest`` 
(`` 
result`` $
)``$ %
;``% &
}aa 	
[cc 	
HttpPostcc	 
(cc 
$strcc 
)cc 
]cc 
publicdd 
IActionResultdd 
Adddd  
(dd  !
Cardd! $
cardd% (
)dd( )
{ee 	
varff 
resultff 
=ff 
_carServiceff $
.ff$ %
Addff% (
(ff( )
carff) ,
)ff, -
;ff- .
ifgg 
(gg 
resultgg 
.gg 
Successgg 
)gg 
{hh 
returnii 
Okii 
(ii 
resultii  
)ii  !
;ii! "
}jj 
returnkk 

BadRequestkk 
(kk 
resultkk $
)kk$ %
;kk% &
}ll 	
[nn 	
HttpPostnn	 
(nn 
$strnn 
)nn 
]nn 
publicoo 
IActionResultoo 
Deleteoo #
(oo# $
Caroo$ '
caroo( +
)oo+ ,
{pp 	
varqq 
resultqq 
=qq 
_carServiceqq $
.qq$ %
Removeqq% +
(qq+ ,
carqq, /
)qq/ 0
;qq0 1
ifrr 
(rr 
resultrr 
.rr 
Successrr 
)rr 
{ss 
returntt 
Oktt 
(tt 
resulttt  
)tt  !
;tt! "
}uu 
returnvv 

BadRequestvv 
(vv 
resultvv $
)vv$ %
;vv% &
}ww 	
[yy 	
HttpPostyy	 
(yy 
$stryy 
)yy 
]yy 
publiczz 
IActionResultzz 
Updatezz #
(zz# $
Carzz$ '
carzz( +
)zz+ ,
{{{ 	
var|| 
result|| 
=|| 
_carService|| $
.||$ %
Update||% +
(||+ ,
car||, /
)||/ 0
;||0 1
if}} 
(}} 
result}} 
.}} 
Success}} 
)}} 
{~~ 
return 
Ok 
( 
result  
)  !
;! "
}
ÄÄ 
return
ÅÅ 

BadRequest
ÅÅ 
(
ÅÅ 
result
ÅÅ $
)
ÅÅ$ %
;
ÅÅ% &
}
ÇÇ 	
}
ÉÉ 
}ÑÑ ‡$
WC:\Users\omerf\Desktop\ReCapProject\ReCapProject\WebAPI\Controllers\ColorsController.cs
	namespace 	
WebAPI
 
. 
Controllers 
{ 
[ 
Route 

(
 
$str 
) 
] 
[		 
ApiController		 
]		 
public

 

class

 
ColorsController

 !
:

" #
ControllerBase

$ 2
{ 
private 
readonly 
IColorService &
_colorService' 4
;4 5
public 
ColorsController 
(  
IColorService  -
colorService. :
): ;
{ 	
_colorService 
= 
colorService (
;( )
} 	
[ 	
HttpGet	 
( 
$str 
) 
] 
public 
IActionResult 
GetAll #
(# $
)$ %
{ 	
var 
result 
= 
_colorService &
.& '
GetAll' -
(- .
). /
;/ 0
if 
( 
result 
. 
Success 
) 
{ 
return 
Ok 
( 
result  
)  !
;! "
} 
return 

BadRequest 
( 
result $
)$ %
;% &
} 	
[ 	
HttpGet	 
( 
$str 
) 
] 
public 
IActionResult 
GetById $
($ %
int% (
id) +
)+ ,
{   	
var!! 
result!! 
=!! 
_colorService!! &
.!!& '
GetById!!' .
(!!. /
id!!/ 1
)!!1 2
;!!2 3
if"" 
("" 
result"" 
."" 
Success"" 
)"" 
{## 
return$$ 
Ok$$ 
($$ 
result$$  
)$$  !
;$$! "
}%% 
return&& 

BadRequest&& 
(&& 
result&& $
)&&$ %
;&&% &
}'' 	
[)) 	
HttpPost))	 
()) 
$str)) 
))) 
])) 
public** 
IActionResult** 
Add**  
(**  !
Color**! &
color**' ,
)**, -
{++ 	
var,, 
result,, 
=,, 
_colorService,, &
.,,& '
Add,,' *
(,,* +
color,,+ 0
),,0 1
;,,1 2
if-- 
(-- 
result-- 
.-- 
Success-- 
)-- 
{.. 
return// 
Ok// 
(// 
result//  
)//  !
;//! "
}00 
return11 

BadRequest11 
(11 
result11 $
)11$ %
;11% &
}22 	
[44 	
HttpPost44	 
(44 
$str44 
)44 
]44 
public55 
IActionResult55 
Update55 #
(55# $
Color55$ )
color55* /
)55/ 0
{66 	
var77 
result77 
=77 
_colorService77 &
.77& '
Update77' -
(77- .
color77. 3
)773 4
;774 5
if88 
(88 
result88 
.88 
Success88 
)88 
{99 
return:: 
Ok:: 
(:: 
result::  
)::  !
;::! "
};; 
return<< 

BadRequest<< 
(<< 
result<< $
)<<$ %
;<<% &
}== 	
[?? 	
HttpPost??	 
(?? 
$str?? 
)?? 
]?? 
public@@ 
IActionResult@@ 
Delete@@ #
(@@# $
Color@@$ )
color@@* /
)@@/ 0
{AA 	
varBB 
resultBB 
=BB 
_colorServiceBB &
.BB& '
RemoveBB' -
(BB- .
colorBB. 3
)BB3 4
;BB4 5
ifCC 
(CC 
resultCC 
.CC 
SuccessCC 
)CC 
{DD 
returnEE 
OkEE 
(EE 
resultEE  
)EE  !
;EE! "
}FF 
returnGG 

BadRequestGG 
(GG 
resultGG $
)GG$ %
;GG% &
}HH 	
}II 
}JJ •%
ZC:\Users\omerf\Desktop\ReCapProject\ReCapProject\WebAPI\Controllers\CustomersController.cs
	namespace 	
WebAPI
 
. 
Controllers 
{ 
[ 
Route 

(
 
$str 
) 
] 
[		 
ApiController		 
]		 
public

 

class

 
CustomersController

 $
:

% &
ControllerBase

' 5
{ 
private 
readonly 
ICustomerService )
_customerService* :
;: ;
public 
CustomersController "
(" #
ICustomerService# 3
customerService4 C
)C D
{ 	
_customerService 
= 
customerService .
;. /
} 	
[ 	
HttpGet	 
( 
$str 
) 
] 
public 
IActionResult 
GetAll #
(# $
)$ %
{ 	
var 
result 
= 
_customerService )
.) *
GetAll* 0
(0 1
)1 2
;2 3
if 
( 
result 
. 
Success 
) 
{ 
return 
Ok 
( 
result  
)  !
;! "
} 
return 

BadRequest 
( 
result $
)$ %
;% &
} 	
[ 	
HttpGet	 
( 
$str 
) 
] 
public 
IActionResult 
GetById $
($ %
int% (
id) +
)+ ,
{   	
var!! 
result!! 
=!! 
_customerService!! )
.!!) *
GetById!!* 1
(!!1 2
id!!2 4
)!!4 5
;!!5 6
if"" 
("" 
result"" 
."" 
Success"" 
)"" 
{## 
return$$ 
Ok$$ 
($$ 
result$$  
)$$  !
;$$! "
}%% 
return&& 

BadRequest&& 
(&& 
result&& $
)&&$ %
;&&% &
}'' 	
[)) 	
HttpPost))	 
()) 
$str)) 
))) 
])) 
public** 
IActionResult** 
Add**  
(**  !
Customer**! )
customer*** 2
)**2 3
{++ 	
var,, 
result,, 
=,, 
_customerService,, )
.,,) *
Add,,* -
(,,- .
customer,,. 6
),,6 7
;,,7 8
if-- 
(-- 
result-- 
.-- 
Success-- 
)-- 
{.. 
return// 
Ok// 
(// 
result//  
)//  !
;//! "
}00 
return11 

BadRequest11 
(11 
result11 $
)11$ %
;11% &
}22 	
[44 	
HttpPost44	 
(44 
$str44 
)44 
]44 
public55 
IActionResult55 
Update55 #
(55# $
Customer55$ ,
customer55- 5
)555 6
{66 	
var77 
result77 
=77 
_customerService77 )
.77) *
Update77* 0
(770 1
customer771 9
)779 :
;77: ;
if88 
(88 
result88 
.88 
Success88 
)88 
{99 
return:: 
Ok:: 
(:: 
result::  
)::  !
;::! "
};; 
return<< 

BadRequest<< 
(<< 
result<< $
)<<$ %
;<<% &
}== 	
[?? 	
HttpPost??	 
(?? 
$str?? 
)?? 
]?? 
public@@ 
IActionResult@@ 
Delete@@ #
(@@# $
Customer@@$ ,
customer@@- 5
)@@5 6
{AA 	
varBB 
resultBB 
=BB 
_customerServiceBB )
.BB) *
RemoveBB* 0
(BB0 1
customerBB1 9
)BB9 :
;BB: ;
ifCC 
(CC 
resultCC 
.CC 
SuccessCC 
)CC 
{DD 
returnEE 
OkEE 
(EE 
resultEE  
)EE  !
;EE! "
}FF 
returnGG 

BadRequestGG 
(GG 
resultGG $
)GG$ %
;GG% &
}HH 	
}II 
}JJ Ω7
XC:\Users\omerf\Desktop\ReCapProject\ReCapProject\WebAPI\Controllers\RentalsController.cs
	namespace 	
WebAPI
 
. 
Controllers 
{ 
[ 
Route 

(
 
$str 
) 
] 
[		 
ApiController		 
]		 
public

 

class

 
RentalsController

 "
:

# $
ControllerBase

% 3
{ 
private 
readonly 
IRentalService '
_rentalService( 6
;6 7
public 
RentalsController  
(  !
IRentalService! /
rentalService0 =
)= >
{ 	
_rentalService 
= 
rentalService *
;* +
} 	
[ 	
HttpGet	 
( 
$str 
) 
] 
public 
IActionResult 
GetAll #
(# $
)$ %
{ 	
var 
result 
= 
_rentalService '
.' (
GetAll( .
(. /
)/ 0
;0 1
if 
( 
result 
. 
Success 
) 
{ 
return 
Ok 
( 
result  
)  !
;! "
} 
return 

BadRequest 
( 
result $
)$ %
;% &
} 	
[ 	
HttpGet	 
( 
$str #
)# $
]$ %
public 
IActionResult 
GetRentalDetails -
(- .
). /
{   	
var!! 
result!! 
=!! 
_rentalService!! '
.!!' (
GetRentalDetails!!( 8
(!!8 9
)!!9 :
;!!: ;
if"" 
("" 
result"" 
."" 
Success"" 
)"" 
{## 
return$$ 
Ok$$ 
($$ 
result$$  
)$$  !
;$$! "
}%% 
return&& 

BadRequest&& 
(&& 
result&& $
)&&$ %
;&&% &
}'' 	
[)) 	
HttpGet))	 
()) 
$str)) #
)))# $
]))$ %
public** 
IActionResult** 
GetRentalByCarId** -
(**- .
int**. 1
carId**2 7
)**7 8
{++ 	
var,, 
result,, 
=,, 
_rentalService,, '
.,,' (
GetRentalByCarId,,( 8
(,,8 9
carId,,9 >
),,> ?
;,,? @
if-- 
(-- 
result-- 
.-- 
Success-- 
)-- 
{.. 
return// 
Ok// 
(// 
result//  
)//  !
;//! "
}00 
return11 

BadRequest11 
(11 
result11 $
)11$ %
;11% &
}22 	
[44 	
HttpGet44	 
(44 
$str44 (
)44( )
]44) *
public55 
IActionResult55 !
GetRentalByCustomerId55 2
(552 3
int553 6

customerId557 A
)55A B
{66 	
var77 
result77 
=77 
_rentalService77 '
.77' (!
GetRentalByCustomerId77( =
(77= >

customerId77> H
)77H I
;77I J
if88 
(88 
result88 
.88 
Success88 
)88 
{99 
return:: 
Ok:: 
(:: 
result::  
)::  !
;::! "
};; 
return<< 

BadRequest<< 
(<< 
result<< $
)<<$ %
;<<% &
}== 	
[?? 	
HttpGet??	 
(?? 
$str?? 
)?? 
]?? 
public@@ 
IActionResult@@ 
GetById@@ $
(@@$ %
int@@% (
id@@) +
)@@+ ,
{AA 	
varBB 
resultBB 
=BB 
_rentalServiceBB '
.BB' (
GetByIdBB( /
(BB/ 0
idBB0 2
)BB2 3
;BB3 4
ifCC 
(CC 
resultCC 
.CC 
SuccessCC 
)CC 
{DD 
returnEE 
OkEE 
(EE 
resultEE  
)EE  !
;EE! "
}FF 
returnGG 

BadRequestGG 
(GG 
resultGG $
)GG$ %
;GG% &
}HH 	
[JJ 	
HttpPostJJ	 
(JJ 
$strJJ 
)JJ 
]JJ 
publicKK 
IActionResultKK 
AddKK  
(KK  !
RentalKK! '
rentalKK( .
)KK. /
{LL 	
varMM 
resultMM 
=MM 
_rentalServiceMM '
.MM' (
AddMM( +
(MM+ ,
rentalMM, 2
)MM2 3
;MM3 4
ifNN 
(NN 
resultNN 
.NN 
SuccessNN 
)NN 
{OO 
returnPP 
OkPP 
(PP 
resultPP  
)PP  !
;PP! "
}QQ 
returnRR 

BadRequestRR 
(RR 
resultRR $
)RR$ %
;RR% &
}SS 	
[UU 	
HttpPostUU	 
(UU 
$strUU 
)UU 
]UU 
publicVV 
IActionResultVV 
UpdateVV #
(VV# $
RentalVV$ *
rentalVV+ 1
)VV1 2
{WW 	
varXX 
resultXX 
=XX 
_rentalServiceXX '
.XX' (
UpdateXX( .
(XX. /
rentalXX/ 5
)XX5 6
;XX6 7
ifYY 
(YY 
resultYY 
.YY 
SuccessYY 
)YY 
{ZZ 
return[[ 
Ok[[ 
([[ 
result[[  
)[[  !
;[[! "
}\\ 
return]] 

BadRequest]] 
(]] 
result]] $
)]]$ %
;]]% &
}^^ 	
[`` 	
HttpPost``	 
(`` 
$str`` 
)`` 
]`` 
publicaa 
IActionResultaa 
Deleteaa #
(aa# $
Rentalaa$ *
rentalaa+ 1
)aa1 2
{bb 	
varcc 
resultcc 
=cc 
_rentalServicecc '
.cc' (
Removecc( .
(cc. /
rentalcc/ 5
)cc5 6
;cc6 7
ifdd 
(dd 
resultdd 
.dd 
Successdd 
)dd 
{ee 
returnff 
Okff 
(ff 
resultff  
)ff  !
;ff! "
}gg 
returnhh 

BadRequesthh 
(hh 
resulthh $
)hh$ %
;hh% &
}ii 	
}jj 
}kk ä%
VC:\Users\omerf\Desktop\ReCapProject\ReCapProject\WebAPI\Controllers\UsersController.cs
	namespace 	
WebAPI
 
. 
Controllers 
{		 
[

 
Route

 

(


 
$str

 
)

 
]

 
[ 
ApiController 
] 
public 

class 
UsersController  
:! "
ControllerBase# 1
{ 
private 
readonly 
IUserService %
_userService& 2
;2 3
public 
UsersController 
( 
IUserService +
userService, 7
)7 8
{ 	
_userService 
= 
userService &
;& '
} 	
[ 	
HttpGet	 
( 
$str 
) 
] 
public 
IActionResult 
GetAll #
(# $
)$ %
{ 	
var 
result 
= 
_userService %
.% &
	GetAllDto& /
(/ 0
)0 1
;1 2
if 
( 
result 
. 
Success 
) 
{ 
return 
Ok 
( 
result  
)  !
;! "
} 
return 

BadRequest 
( 
result $
)$ %
;% &
} 	
[   	
HttpGet  	 
(   
$str   
)   
]   
public!! 
IActionResult!! 
GetById!! $
(!!$ %
int!!% (
id!!) +
)!!+ ,
{"" 	
var## 
result## 
=## 
_userService## %
.##% &
GetUserDtoById##& 4
(##4 5
id##5 7
)##7 8
;##8 9
if$$ 
($$ 
result$$ 
.$$ 
Success$$ 
)$$ 
{%% 
return&& 
Ok&& 
(&& 
result&&  
)&&  !
;&&! "
}'' 
return(( 

BadRequest(( 
((( 
result(( $
)(($ %
;((% &
})) 	
[++ 	
HttpPost++	 
(++ 
$str++ 
)++ 
]++ 
public,, 
IActionResult,, 
Add,,  
(,,  !
User,,! %
user,,& *
),,* +
{-- 	
var.. 
result.. 
=.. 
_userService.. %
...% &
Add..& )
(..) *
user..* .
)... /
;../ 0
if// 
(// 
result// 
.// 
Success// 
)// 
{00 
return11 
Ok11 
(11 
result11  
)11  !
;11! "
}22 
return33 

BadRequest33 
(33 
result33 $
)33$ %
;33% &
}44 	
[66 	
HttpPost66	 
(66 
$str66 
)66 
]66 
public77 
IActionResult77 
Update77 #
(77# $
UserDto77$ +
user77, 0
)770 1
{88 	
var99 
result99 
=99 
_userService99 %
.99% &
UpdateByDto99& 1
(991 2
user992 6
)996 7
;997 8
if:: 
(:: 
result:: 
.:: 
Success:: 
):: 
{;; 
return<< 
Ok<< 
(<< 
result<<  
)<<  !
;<<! "
}== 
return>> 

BadRequest>> 
(>> 
result>> $
)>>$ %
;>>% &
}?? 	
[AA 	
HttpPostAA	 
(AA 
$strAA 
)AA 
]AA 
publicBB 
IActionResultBB 
DeleteBB #
(BB# $
[BB$ %
FromFormBB% -
]BB- .
intBB/ 2
idBB3 5
)BB5 6
{CC 	
varDD 
resultDD 
=DD 
_userServiceDD %
.DD% &
DeleteDD& ,
(DD, -
idDD- /
)DD/ 0
;DD0 1
ifEE 
(EE 
resultEE 
.EE 
SuccessEE 
)EE 
{FF 
returnGG 
OkGG 
(GG 
resultGG  
)GG  !
;GG! "
}HH 
returnII 

BadRequestII 
(II 
resultII $
)II$ %
;II% &
}JJ 	
}KK 
}LL Ÿ&
BC:\Users\omerf\Desktop\ReCapProject\ReCapProject\WebAPI\Program.cs
	namespace 	
WebAPI
 
{ 
public 

class 
Program 
{ 
public 
static 
void 
Main 
(  
string  &
[& '
]' (
args) -
)- .
{ 	
var 
builder 
= 
WebApplication (
.( )
CreateBuilder) 6
(6 7
args7 ;
); <
;< =
builder 
. 
Host 
. %
UseServiceProviderFactory 2
(2 3
new3 6)
AutofacServiceProviderFactory7 T
(T U
)U V
)V W
;W X
builder 
. 
Host 
. 
ConfigureContainer +
<+ ,
ContainerBuilder, <
>< =
(= >
builder> E
=>F H
{ 
builder 
. 
RegisterModule &
(& '
new' *!
AutofacBusinessModule+ @
(@ A
)A B
)B C
;C D
} 
) 
; 
builder 
. 
Services 
. 
AddControllers +
(+ ,
), -
;- .
var 
tokenOptions 
= 
builder &
.& '
Configuration' 4
.4 5

GetSection5 ?
(? @
$str@ N
)N O
.O P
GetP S
<S T
TokenOptionsT `
>` a
(a b
)b c
;c d
builder   
.   
Services   
.   
AddAuthentication   .
(  . /
JwtBearerDefaults  / @
.  @ A 
AuthenticationScheme  A U
)  U V
.!! 
AddJwtBearer!! 
(!! 
options!! %
=>!!& (
{"" 
options## 
.## %
TokenValidationParameters## 5
=##6 7
new##8 ;%
TokenValidationParameters##< U
{$$ 
ValidateIssuer%% &
=%%' (
true%%) -
,%%- .
ValidateAudience&& (
=&&) *
true&&+ /
,&&/ 0
ValidateLifetime'' (
='') *
true''+ /
,''/ 0
ValidIssuer(( #
=(($ %
tokenOptions((& 2
.((2 3
Issuer((3 9
,((9 :
ValidAudience)) %
=))& '
tokenOptions))( 4
.))4 5
Audience))5 =
,))= >$
ValidateIssuerSigningKey** 0
=**1 2
true**3 7
,**7 8
IssuerSigningKey++ (
=++) *
SecurityKeyHelper+++ <
.++< =
CreateSecurityKey++= N
(++N O
tokenOptions++O [
.++[ \
SecurityKey++\ g
)++g h
},, 
;,, 
}-- 
)-- 
;-- 
builder// 
.// 
Services// 
.// "
AddDependencyResolvers// 3
(//3 4
new//4 7
ICoreModule//8 C
[//C D
]//D E
{00 
new11 

CoreModule11 
(11 
)11  
}22 
)22 
;22 
builder55 
.55 
Services55 
.55 #
AddEndpointsApiExplorer55 4
(554 5
)555 6
;556 7
builder66 
.66 
Services66 
.66 
AddSwaggerGen66 *
(66* +
)66+ ,
;66, -
var88 
app88 
=88 
builder88 
.88 
Build88 #
(88# $
)88$ %
;88% &
if;; 
(;; 
app;; 
.;; 
Environment;; 
.;;  
IsDevelopment;;  -
(;;- .
);;. /
);;/ 0
{<< 
app== 
.== 

UseSwagger== 
(== 
)==  
;==  !
app>> 
.>> 
UseSwaggerUI>>  
(>>  !
)>>! "
;>>" #
}?? 
appAA 
.AA 
UseStaticFilesAA 
(AA 
)AA  
;AA  !
appCC 
.CC 
UseHttpsRedirectionCC #
(CC# $
)CC$ %
;CC% &
appEE 
.EE 
UseAuthenticationEE !
(EE! "
)EE" #
;EE# $
appGG 
.GG 
UseAuthorizationGG  
(GG  !
)GG! "
;GG" #
appJJ 
.JJ 
MapControllersJJ 
(JJ 
)JJ  
;JJ  !
appLL 
.LL 
RunLL 
(LL 
)LL 
;LL 
}MM 	
}NN 
}OO 